<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Produto</title>
    <link rel="stylesheet" href="../css/produto.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

</head>

<body>
    <div id="meu-header"></div>
    
    <div class="produto-card">
        <div class="produto-info">
            <h1 class="produto-nome">Carregando produto...</h1>
            
            <!-- Adicionando a imagem do produto -->
            <div class="produto-imagem">
                <img src="" alt="Imagem do produto" style="max-width: 300px; max-height: 300px; margin: 20px auto; display: block;">
            </div>
            
            <div class="produto-descricao"></div>
            
            <div class="produto-preco">
                <p class="preco-antigo" style="text-decoration: line-through; color: #888; font-size: 18px;">R$0,00</p>
                <p class="preco-promocao" style="font-size: 28px; color: #e60000; margin: 5px 0;">R$0,00</p>
                <p class="desconto" style="font-size: 16px; color: #555;">À vista no PIX com 10% OFF</p>
                
                <div class="preco-parcelado" style="margin-top: 10px;">
                    <p style="font-size: 18px; margin: 5px 0;">R$0,00</p>
                    <p style="font-size: 16px; margin: 5px 0;">Em até 10x sem juros no cartão.</p>
                    <p style="font-size: 16px; margin: 5px 0;">Ou em 1x no cartão com 10% OFF.</p>
                </div>
            </div>
            
            <div class="quantidade-selector">
                <label for="quantidade" style="margin-right: 10px; font-weight: bold;">Quantidade:</label>
                <select id="quantidade" class="form-select" aria-label="Quantidade" style="width: 150px;">
                    <option value="1">1 unidade</option>
                    <option value="2">2 unidades</option>
                    <option value="3">3 unidades</option>
                    <option value="4">4 unidades</option>
                    <option value="5">5 unidades</option>
                </select>
            </div>
            
            <div class="produto-acoes">
                <button class="btn-comprar">
                    <i class="bi bi-cart"></i> Comprar Agora
                </button>
                <button class="btn-carrinho">
                    <i class="bi bi-cart-plus"></i> Adicionar ao Carrinho
                </button>
            </div>
        </div>
    </div>
    
    <script src="../js/cabecalho.js"></script>
    <script src="../js/productLoader.js"></script>
    <script src="../js/search.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Override the displayProductDetails function
        window.addEventListener('load', function() {
            if (typeof displayProductDetails === 'function') {
                const originalDisplayProductDetails = displayProductDetails;
                
                displayProductDetails = function(product) {
                    // Update product name
                    const productName = document.querySelector('.produto-nome');
                    if (productName) {
                        productName.textContent = product.nome;
                    }
                    
                    // Update product image
                    const productImage = document.querySelector('.produto-imagem img');
                    if (productImage && product.imagemPrincipal) {
                        productImage.src = product.imagemPrincipal;
                        productImage.alt = product.nome;
                    }
                    
                    // Update description if available
                    const productDescription = document.querySelector('.produto-descricao');
                    if (productDescription && product.descricao) {
                        productDescription.textContent = product.descricao;
                    }
                    
                    // Update prices
                    const oldPrice = document.querySelector('.preco-antigo');
                    if (oldPrice) {
                        oldPrice.textContent = `R$${formatPrice(product.precoAntigo)}`;
                    }
                    
                    const promoPrice = document.querySelector('.preco-promocao');
                    if (promoPrice) {
                        promoPrice.textContent = `R$${formatPrice(product.precoAtual)}`;
                    }
                    
                    // Update parcelado price
                    const parceladoPrices = document.querySelectorAll('.preco-parcelado p');
                    if (parceladoPrices.length > 0) {
                        parceladoPrices[0].textContent = `R$${formatPrice(product.precoAtual)}`;
                    }
                    
                    // Set up add to cart button handler
                    const addToCartBtn = document.querySelector('.btn-carrinho');
                    if (addToCartBtn) {
                        addToCartBtn.addEventListener('click', function() {
                            const quantity = parseInt(document.getElementById('quantidade').value) || 1;
                            addToCart(product, quantity);
                        });
                    }
                    
                    // Set up buy now button handler
                    const buyNowBtn = document.querySelector('.btn-comprar');
                    if (buyNowBtn) {
                        buyNowBtn.addEventListener('click', function() {
                            const quantity = parseInt(document.getElementById('quantidade').value) || 1;
                            addToCart(product, quantity);
                            window.location.href = 'carrinho.html';
                        });
                    }
                };
            }
        });
    </script>
</body>

</html>